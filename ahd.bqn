#!/usr/bin/env bqn

# This file is part of AHD.
#
# Copyright (c) 2024 ona-li-toki-e-jan-Epiphany-tawa-mi
#
# AHD is free software: you can redistribute it and/or modify it under the terms
# of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# AHD is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
# A PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# AHD. If not, see <https://www.gnu.org/licenses/>.

# AHD - A HexDumper. Hex dump utility.

# Returns the contents of a file as bytes.
# ğ•©: string - file name.
# â†: number list.
ReadBytes â† @-Ëœâ€¢file.MapBytes

# Splits a list into groups of a specified size. Leftover data that could not
# fit in will be placed into the last group
# ğ•©: list.
# ğ•¨: number - size.
# â†: list of lists.
GroupEvery â† {ğ•©âŠ”ËœâŒŠğ•¨Ã·Ëœâ†•â‰ ğ•©}

# Converts a number to it's uppercase hexidecimal representation as a string of a
# specified length, left-padding with zeros.
# ğ•©: number - to convert.
# ğ•¨:number - length.
Hexify â† (â¥ŠâŸœ16)âŠ¸{"0123456789ABCDEF"âŠËœğ•¨|âŒŠÃ·`âŒ¾âŒ½ğ•¨Â«Ëœ<ğ•©}

Hexdump â† {
    â€¢Out (7 Hexify âŠ‘ğ•©) âˆ¾ ':' âˆ¾ (âˆ¾(' 'âˆ¾2âŠ¸Hexify)Â¨1âŠ‘ğ•©)
}Â¨âˆ˜((16âŠ¸Ã—â—‹â†•â‰ )â‹ˆÂ¨âŠ¢)16âŠ¸GroupEvery

main â† {
    Hexdump ReadBytes "ahd.apl"
    # â€¢Out 5 Hexify 12427
}
main
